<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全选</title>
    <style>
        #box{
            margin: 20px;
        }
    </style>
</head>
<body>
    <div id="box">
        <input type="checkbox" checked>苹果<br>
        <input type="checkbox">香蕉<br>
        <input type="checkbox" checked>葡萄<br>
        <input type="checkbox">橘子<br>
        <input type="checkbox">西瓜<br>
        <input type="checkbox">樱桃<br>
    </div>
    <input type="checkbox" id="all">全选
</body>
<script>
    var box = document.getElementById('box');
    var inputs = box.getElementsByTagName('input');
    var all = document.getElementById('all');

    var num = 0; //记录选中的个数
    // 默认有哪些是选中的，记录初始选中数量
    for(var i=0;i<inputs.length;i++){
        if (inputs[i].checked) {
            num++;
        }
    }

    // 全选按钮
    all.onchange = function(){
        for(var i=0;i<inputs.length;i++){
            // 将全选按钮的状态 赋值给 单个按钮
            inputs[i].checked =all.checked;
        }

        // if (all.checked) { //全选
        //     num = inputs.length;
        // } else {
        //     num = 0;
        // }

        num = all.checked ? inputs.length : 0; 
    }

    
    for(var i=0;i<inputs.length;i++){
        inputs[i].onchange = function(){
            // if (this.checked) { //选中 num 递增1
            //     num++;
            // } else { //取消选中 num 递减1
            //     num--;
            // }

            this.checked ? num++ : num--;

            // 判断num的值，确定 all 的选中状态
            // if (num == inputs.length) { //全部选中
            //     all.checked = true;
            // }
            // else{
            //     all.checked = false;
            // }

            all.checked = num == inputs.length;
        }
    }


</script>
</html>