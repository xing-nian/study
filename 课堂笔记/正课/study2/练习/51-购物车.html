<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简单购物车样式</title>
   <style>
        table{
        width: 600px;
    
        border: 1px solid #000;
        /* 合并边框  collapse 合并*/
        border-collapse: collapse;
        
        text-align: center;
    }
    td{
        border: 1px solid #000;
    }
    thead tr td{
        font-weight: 700;
    }
   </style>
</head>
<body>
      <table>
         <thead>
            <tr>
                <td>选择</td>
                <td>名称</td>
                <td>图片</td>
                <td>单价</td>
                <td>数 量</td>
            </tr>
         </thead>
          <tr>
              
              <td><input type="checkbox" class="dx" checked></td>
              <td>苹果</td>
              <td><img src="furit.png" alt=""></td>
              <td class="price"><em>2.99元</em></td>
              <td> <div class="box">
                <button class="reduce"> - </button>
                <button class="count">1</button>
                <button class="increase"> + </button>
            </div>
           </td>
              
          </tr>
          <tr>
            <td><input type="checkbox" class="dx"></td>
            <td>香蕉</td>
            <td><img src="furit.png" alt=""></td>
            <td class="price"><em>3.99元</em></td>
            <td>
                <div class="box">
                    <button class="reduce"> - </button>
                    <button class="count">1</button>
                    <button class="increase"> + </button>
                </div>
            </td>
            
        </tr>
        <tr>
            <td><input type="checkbox" class="dx"></td>
            <td>橘子</td>
            <td><img src="furit.png" alt=""></td>
            <td class="price"><em>3.59元</em></td>
            <td> <div class="box">
                <button class="reduce"> - </button>
                <button class="count">1</button>
                <button class="increase"> + </button>
            </div>
         </td>
            
        </tr>
      </table>
      
     
      <input type="checkbox" id="qx" >全选<br>
      商品总价为：<span id="total">3.00元</span><br>
</body>
<script> 
/*  
1.全选 反选功能
2. +  - 号功能
注意 :for循环给没给按钮绑定点击的事件的同时,给它们绑定动态属性index
3.计算价格
    a.改变单个复选框的选中状态时,修改总价
    注意:for循环给每个input标签绑定 onchange的同时,给它们动态绑定属性index
    根据 input 的index属性值,找到这一行的单价,数量,计算总价.
    判断 input 的 checked属性值,选中时,在总价基础上 加单价*数量;
    取消选中时,在总价基础上减 单价*数量.

    b.改变全选按钮的选中状态时,修改总价
    判断 全选按钮的选中状态,选中,则 遍历每一行的单价和数量,进行求和运算:取消选中,总价为零


    c.-/+号按钮
    如果 -/+ 号所在行的input标签时checked,此时才计算总价;

*/ 
     var qx = document.getElementById('qx') ;
     var dx = document.getElementsByClassName('dx');
     var reduce = document.getElementsByClassName("reduce");
     var increase = document.getElementsByClassName("increase");
     var count = document.getElementsByClassName("count");
     var price = document.getElementsByClassName("price");
     var total = document.getElementById('total') ;
    // 点击全选
     qx.onclick = function(){
        // console.log(qx.checked);
        for(i=0; i< dx.length; i++){
            dx[i].checked = qx.checked;
        }
     }
    //  设置全选按钮的选择状态
     var all = dx.length;
     for(i=0 ; i<dx.length ; i++){
         dx[i].onclick = function(){
             var num =0;
            //  var unpri = price[this.index].innerHTML;
            //  var counts =count[this.index].innerHTML;
            //  console.log(unpri,counts);
            for(i=0 ; i<dx.length ; i++){
                
                if(dx[i].checked){
                    num++
                    
                }
            }
            if(num == all){
                qx.checked = true;
            }

            if(num !==all){
                qx.checked = false;
            }
         }
     }
     
    //计数器 + -
  
    for(var i =0; i<dx.length ;i++){
        // 绑定索引值并记录
        reduce[i].index = i;
        reduce[i].onclick = function(){
            var x =count[this.index].innerHTML;
            if(x*1 == 1){
                x=1 ;
            }else{
                x--;
            }
            count[this.index].innerHTML = x;

        }

        // 绑定索引值并记录
        increase[i].index=i
        increase[i].onclick = function(){
            count[this.index].innerHTML = count[this.index].
            innerHTML * 1 +1;
        }
    }
   
</script>
</html>
